<header class="bg-[var(--color-primary)] text-white shadow-lg shadow-black/30">
  <div class="border-b border-white/10">
    <div class="mx-auto flex max-w-6xl flex-col gap-4 px-4 py-6 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-4">
        <% const logoSrc = theme.logoUrl || branding?.logoUrl; %>
        <% if (logoSrc) { %>
          <div class="flex h-16 w-16 items-center justify-center overflow-hidden rounded-full border border-white/20 bg-white/10">
            <img
              src="<%= logoSrc %>"
              alt="<%= theme.siteName %> logo"
              class="max-h-full max-w-full object-contain"
            />
          </div>
        <% } else { %>
          <div class="flex h-16 w-16 items-center justify-center rounded-full border border-white/20 bg-white/10 text-2xl font-bold uppercase tracking-wide">
            <%= (theme.brandName || theme.siteName || '').substring(0, 3) %>
          </div>
        <% } %>
        <div>
          <p class="text-sm uppercase tracking-[0.35em] text-white/70">
            <%= tenant?.name || theme.brandName %>
          </p>
          <h1 class="text-2xl font-semibold tracking-tight sm:text-3xl">
            <%= theme.siteName %>
          </h1>
        </div>
      </div>
      <% const primaryNav = theme.navigation || [{ label: 'Home', href: '/' }]; %>
      <nav class="flex flex-1 flex-col gap-3 text-sm font-medium uppercase sm:flex-row sm:items-center sm:justify-end sm:gap-8">
        <% primaryNav.forEach((item) => {
             if (!item || !item.href) return;
             const isActive = currentPath === item.href;
        %>
          <a
            href="<%= item.href %>"
            class="relative inline-flex items-center gap-1 tracking-wide transition
              <%= isActive ? 'text-white after:absolute after:bottom-[-0.6rem] after:left-0 after:h-0.5 after:w-full after:bg-white' : 'text-white/80 hover:text-white' %>"
          >
            <span><%= item.label %></span>
          </a>
        <% }) %>
      </nav>
    </div>
  </div>
  <% if ((categories || []).length) { %>
    <div class="border-b border-white/5 bg-white/5 backdrop-blur">
      <nav class="mx-auto flex max-w-6xl flex-wrap items-center gap-3 px-4 py-3 text-sm font-medium uppercase tracking-wide text-white/80">
        <span class="text-xs font-semibold text-white/60">Categories:</span>
        <% categories.forEach((category) => {
             const isActiveCategory = currentPath.startsWith('/category') && currentPath.includes(`/${category.slug}`);
        %>
          <a
            href="/category/<%= category.slug %>"
            class="rounded-full border border-white/10 px-3 py-1 transition
              <%= isActiveCategory ? 'bg-white text-[var(--color-primary)]' : 'hover:border-white/40 hover:text-white' %>"
          >
            <%= category.name %>
          </a>
        <% }) %>
      </nav>
    </div>
  <% } %>
</header>
